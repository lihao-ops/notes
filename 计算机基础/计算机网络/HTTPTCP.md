

HTTP
---

### 状态码

![image-20241028193331510](https://notes-1307435281.cos.ap-shanghai.myqcloud.com/note/master/202410281933648.png)

> HTTP 状态码分为 5 大类

- 1xx 类状态码属于**提示信息**，是协议处理中的一种中间状态，实际用到的比较少。
- 2xx 类状态码表示服务器**成功**处理了客户端的请求，也是我们最愿意看到的状态。
- 3xx 类状态码表示客户端请求的资源发生了变动，需要客户端用新的 URL 重新发送请求获取资源，也就是**重定向**。
- 4xx 类状态码表示客户端发送的**报文有误**，服务器无法处理，也就是错误码的含义。
- 5xx 类状态码表示客户端请求报文正确，但是**服务器处理时内部发生了错误**，属于服务器端的错误码。

其中常见的具体状态码有：

- 200：请求成功；
- 301：永久重定向；302：临时重定向；
- 404：无法找到此页面；405：请求的方法类型不支持；
- 500：服务器内部出错。







TCP
---



### TCP保证可靠性的原理

> TCP协议主要通过以下几点来保证传输可靠性：连接管理、序列号、确认应答、超时重传、流量控制、拥塞控制。

- **连接管理**：即三次握手和四次挥手。连接管理机制能够建立起可靠的连接，这是保证传输可靠性的前提。
- **序列号**：TCP将每个字节的数据都进行了编号，这就是序列号。序列号的具体作用如下：
  - 能够保证**可靠性**，既能**防止数据丢失，又能防止数据重复**。
  - 能够保证**有序性**：**按照序列号顺序进行数据包还原**。能够提高效率，基于序列号可实现**多次发送，一次确认**。
- **确认应答**：接收方接收数据之后，会回传ACK报文，报文中带有此次确认的序列号，用于告知发送方此次接收数据的情况。**在指定时间后，若发送端仍未收到确认应答，就会启动超时重传**。
- **超时重传**：超时重传主要有两种场景：
  - **数据包丢失**：在指定时间后，若发送端仍未收到确认应答，就会**启动超时重传**，向接收端重新发送数据包。
  - **确认包丢失**：当接收端收到重复数据(通过序列号进行识别)时将其丢弃，并**重新回传ACK报文。**
- **流量控制**：接收端处理数据的速度是有限的，如果发送方发送数据的速度过快，就会导致接收端的缓冲区溢出，进而导致丢包。为了避免上述情况发生，**TCP支持根据接收端的处理能力，来决定发送端的发送速度。这就是流量控制**。
  - 流量控制是通过TCP报文段首部维护一个滑动窗口来实现的。
- **拥塞控制**：**拥塞控制就是当网络拥堵严重时，发送端减少数据发送**。拥塞控制是通过发送端维护一个拥塞窗口来实现的。
  - 可以得出，**发送端的发送速度，受限于滑动窗口和拥塞窗口中的最小值**。
  - **拥塞控制方法分为：慢开始，拥塞避免、快重传和快恢复。**

#### 拥塞控制

> TCP 拥塞控制是为了**防止网络过载**而采取的一系列措施，这些措施能够动态调整数据传输速率以适应网络状态。TCP 的拥塞控制主要包括以下几种算法和策略：

- **慢启动**：当 TCP 连接建立或发生丢包重传时，TCP 从一个相对较小的拥塞窗口（cwnd）开始。这一窗口随着每次成功收到确认（ACK）而指数增长（每收到一个 ACK，窗口大小增加 1），目的是快速探测可用带宽。
- **拥塞避免**：当拥塞窗口达到一个阈值（ssthresh, slow start threshold）后，TCP 进入拥塞避免阶段。在这个阶段，拥塞窗口以线性增长方式增加（每经过一个轮次，增加 1，即每 RTT 增加 1），这样可以减少发生拥塞的风险。
- **快速重传（Fast Retransmit）**：发送方在未收到某个数据包的 ACK 时，收到三个重复的 ACK（即接收方多次确认相同的数据包）时，发送方会立即重传缺失的数据包，而不是等待重传定时器超时。这有助于减少由于丢包导致的延迟。
- **快速恢复（Fast Recovery）**：在快速重传机制之后，TCP 会进入快速恢复阶段。此时，ssthresh 被设置为当前的 cwnd 值的一半，接着 cwnd 被设置为 ssthresh 加上三个未确认的 MSS（最大段大小）。这样，TCP 在丢包后不会完全降低其传输速率，而是球立一个新的目标以便快速返回正常状态。

