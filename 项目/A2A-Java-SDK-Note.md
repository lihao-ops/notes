





# A2A Java SDK





## ğŸ§­ ä»€ä¹ˆæ˜¯ A2A Java SDKï¼Ÿ

**A2A Java SDK** æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºæ”¯æŒ [Agent2Agent (A2A)] åè®®çš„ Java åº”ç”¨çš„å¼€å‘å·¥å…·åŒ…ã€‚å®ƒå…è®¸ä½ çš„ Java ç¨‹åº**ä»¥ä»£ç†ï¼ˆAgentï¼‰çš„èº«ä»½è¿è¡Œ**ï¼Œå¹¶èƒ½ä¸å…¶ä»–ä»£ç†è¿›è¡Œæ ‡å‡†åŒ–é€šä¿¡â€”â€”åŒ…æ‹¬å‘é€æ¶ˆæ¯ã€æ¥æ”¶å“åº”ã€å¤„ç†ä»»åŠ¡ã€æµå¼äº¤äº’ç­‰ã€‚

### ğŸ§‘â€ğŸ’» é¢å‘ Java å¼€å‘è€…çš„ç†è§£

ä½ å¯ä»¥æŠŠ A2A SDK ç†è§£ä¸ºä¸€ç§ **"é€šç”¨ä»£ç†é€šä¿¡æ¡†æ¶"**ï¼š

- å°±åƒ HTTP æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯é€šä¿¡çš„åè®®ä¸€æ ·ï¼ŒA2A æ˜¯**å¤šä¸ªæ™ºèƒ½ä»£ç†ä¹‹é—´é€šä¿¡çš„åè®®æ ‡å‡†**ã€‚
- æ¯ä¸ªä»£ç†å°±åƒä¸€ä¸ªç‹¬ç«‹çš„â€œæœåŠ¡æœºå™¨äººâ€ï¼Œè´Ÿè´£å¤„ç†ç‰¹å®šçš„ä»»åŠ¡ï¼Œæ¯”å¦‚å¤©æ°”æŸ¥è¯¢ã€ä»£ç ç”Ÿæˆã€é—®ç­”å¤„ç†ç­‰ã€‚
- ä½¿ç”¨ A2A SDKï¼Œä½ çš„ Java åº”ç”¨å¯ä»¥å¿«é€Ÿå˜æˆä¸€ä¸ª â€œæ™ºèƒ½ä»£ç†â€ï¼Œæ—¢èƒ½æ¥æ”¶ä»»åŠ¡ï¼Œä¹Ÿèƒ½ä¸»åŠ¨ä¸å…¶ä»–ä»£ç†åä½œã€‚



### âœ… ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ A2Aï¼Ÿ

| ä¼˜åŠ¿                 | è¯´æ˜                                                   |
| -------------------- | ------------------------------------------------------ |
| **æ ‡å‡†åè®®**         | é¿å…é‡å¤é€ è½®å­ï¼Œè‡ªåŠ¨åŒ–å¤„ç†æ¶ˆæ¯ã€ä»»åŠ¡ã€çŠ¶æ€ç­‰å¤æ‚é€»è¾‘ã€‚ |
| **æ¨¡å—åŒ–ä»£ç†è®¾è®¡**   | æ¯ä¸ªä»£ç†èŒè´£æ¸…æ™°ï¼Œç³»ç»Ÿæ˜“äºæ‹†åˆ†å’Œæ‰©å±•ã€‚                 |
| **è·¨è¯­è¨€äº’æ“ä½œæ€§**   | æ”¯æŒ Python/Java ç­‰å¤šè¯­è¨€ä»£ç†äº’è”ï¼Œä¿ƒè¿›å¼‚æ„ç³»ç»Ÿæ•´åˆã€‚  |
| **æ”¯æŒæµå¼é€šä¿¡**     | å¯å®æ—¶ä¼ è¾“æ•°æ®ç‰‡æ®µï¼Œé€‚ç”¨äºé•¿æ–‡æœ¬å¤„ç†ã€é€æ­¥å“åº”ç­‰åœºæ™¯ã€‚ |
| **å¯æ’æ‹”è¿è¡Œæ—¶é›†æˆ** | æ”¯æŒä¸ Quarkusã€Jakarta EE ç­‰å¤šç§ Java è¿è¡Œæ—¶é›†æˆã€‚    |



> A2A Java SDK æ˜¯ä¸€ä¸ªç”¨äºå®ç° Agent2Agent (A2A) åè®®çš„ Java åº“ï¼Œæ”¯æŒå°†ä»£ç†åº”ç”¨ç¨‹åºä½œä¸º A2A æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯è¿è¡Œã€‚

------



## âœ¨ åŠŸèƒ½æ¦‚è¿°

- å®ç° A2A åè®®çš„ Java Server ä¸ Clientã€‚
- æä¾› Quarkus çš„å‚è€ƒå®ç°ã€‚
- æ”¯æŒæ™®é€šæ¶ˆæ¯ä¸æµå¼æ¶ˆæ¯é€šä¿¡ã€‚
- ç¤¾åŒºè´¡çŒ®çš„å¤šç§è¿è¡Œæ—¶é›†æˆã€‚

------



## ğŸ“¦ å®‰è£…

é€šè¿‡ Maven æ„å»ºï¼š

```bash
mvn clean install
```

------



## ğŸš€ A2A æœåŠ¡å™¨ç«¯å¼€å‘

### 1. æ·»åŠ  SDK Server ä¾èµ–

```xml
<dependency>
    <groupId>io.github.a2asdk</groupId>
    <artifactId>a2a-java-reference-server</artifactId>
    <version>${io.a2a.sdk.version}</version>
</dependency>
```

> âš ï¸ æ³¨æ„ï¼š`io.github.a2asdk` ä¸ºä¸´æ—¶ groupIdï¼Œæœªæ¥å¯èƒ½æ”¹å˜ã€‚

------

### 2. æ·»åŠ åˆ›å»º A2A ä»£ç†å¡çš„ç±»

```java
import io.a2a.server.PublicAgentCard;
import io.a2a.spec.AgentCapabilities;
import io.a2a.spec.AgentCard;
import io.a2a.spec.AgentSkill;
...

@ApplicationScoped
public class WeatherAgentCardProducer {
    
    @Produces
    @PublicAgentCard
    public AgentCard agentCard() {
        return new AgentCard.Builder()
                .name("Weather Agent")
                .description("Helps with weather")
                .url("http://localhost:10001")
                .version("1.0.0")
                .capabilities(new AgentCapabilities.Builder()
                        .streaming(true)
                        .pushNotifications(false)
                        .stateTransitionHistory(false)
                        .build())
                .defaultInputModes(Collections.singletonList("text"))
                .defaultOutputModes(Collections.singletonList("text"))
                .skills(Collections.singletonList(new AgentSkill.Builder()
                        .id("weather_search")
                        .name("Search weather")
                        .description("Helps with weather in city, or states")
                        .tags(Collections.singletonList("weather"))
                        .examples(List.of("weather in LA, CA"))
                        .build()))
                .protocolVersion("0.2.5")
                .build();
    }
}
```

------

### 3. æ·»åŠ ä¸€ä¸ªåˆ›å»º A2A ä»£ç†æ‰§è¡Œå™¨çš„ç±»

```java
import io.a2a.server.agentexecution.AgentExecutor;
import io.a2a.server.agentexecution.RequestContext;
import io.a2a.server.events.EventQueue;
import io.a2a.server.tasks.TaskUpdater;
import io.a2a.spec.JSONRPCError;
import io.a2a.spec.Message;
import io.a2a.spec.Part;
import io.a2a.spec.Task;
import io.a2a.spec.TaskNotCancelableError;
import io.a2a.spec.TaskState;
import io.a2a.spec.TextPart;
...

@ApplicationScoped
public class WeatherAgentExecutorProducer {

    @Inject
    WeatherAgent weatherAgent;

    @Produces
    public AgentExecutor agentExecutor() {
        return new WeatherAgentExecutor(weatherAgent);
    }

    private static class WeatherAgentExecutor implements AgentExecutor {

        private final WeatherAgent weatherAgent;

        public WeatherAgentExecutor(WeatherAgent weatherAgent) {
            this.weatherAgent = weatherAgent;
        }

        @Override
        public void execute(RequestContext context, EventQueue eventQueue) throws JSONRPCError {
            TaskUpdater updater = new TaskUpdater(context, eventQueue);

            // mark the task as submitted and start working on it
            if (context.getTask() == null) {
                updater.submit();
            }
            updater.startWork();

            // extract the text from the message
            String userMessage = extractTextFromMessage(context.getMessage());

            // call the weather agent with the user's message
            String response = weatherAgent.chat(userMessage);

            // create the response part
            TextPart responsePart = new TextPart(response, null);
            List<Part<?>> parts = List.of(responsePart);

            // add the response as an artifact and complete the task
            updater.addArtifact(parts, null, null, null);
            updater.complete();
        }

        @Override
        public void cancel(RequestContext context, EventQueue eventQueue) throws JSONRPCError {
            Task task = context.getTask();

            if (task.getStatus().state() == TaskState.CANCELED) {
                // task already cancelled
                throw new TaskNotCancelableError();
            }

            if (task.getStatus().state() == TaskState.COMPLETED) {
                // task already completed
                throw new TaskNotCancelableError();
            }

            // cancel the task
            TaskUpdater updater = new TaskUpdater(context, eventQueue);
            updater.cancel();
        }

        private String extractTextFromMessage(Message message) {
            StringBuilder textBuilder = new StringBuilder();
            if (message.getParts() != null) {
                for (Part part : message.getParts()) {
                    if (part instanceof TextPart textPart) {
                        textBuilder.append(textPart.getText());
                    }
                }
            }
            return textBuilder.toString();
        }
    }
}
```

------



## ğŸ§­ A2A å®¢æˆ·ç«¯ä½¿ç”¨

### æ·»åŠ  SDK Client ä¾èµ–

```xml
<dependency>
    <groupId>io.github.a2asdk</groupId>
    <artifactId>a2a-java-sdk-client</artifactId>
    <version>${io.a2a.sdk.version}</version>
</dependency>
```

------

### ç¤ºä¾‹ç”¨æ³•



#### åˆ›å»º A2A å®¢æˆ·ç«¯

```java
// Create an A2AClient (the URL specified is the server agent's URL, be sure to replace it with the actual URL of the A2A server you want to connect to)
A2AClient client = new A2AClient("http://localhost:1234");
```



#### å‘ A2A æœåŠ¡å™¨ä»£ç†å‘é€æ¶ˆæ¯

```java
// Send a text message to the A2A server agent
Message message = A2A.toUserMessage("tell me a joke"); // the message ID will be automatically generated for you
MessageSendParams params = new MessageSendParams.Builder()
        .message(message)
        .build();
SendMessageResponse response = client.sendMessage(params);        
```

è¯·æ³¨æ„ï¼Œ å¦‚æœæ‚¨æœªæŒ‡å®šï¼Œ`A2A#toUserMessage`åˆ™åœ¨åˆ›å»ºæ—¶ä¼šè‡ªåŠ¨ä¸ºæ‚¨ç”Ÿæˆæ¶ˆæ¯ ID ã€‚æ‚¨ä¹Ÿå¯ä»¥åƒè¿™æ ·æ˜¾å¼æŒ‡å®šæ¶ˆæ¯ IDï¼š`Message`

```java
Message message = A2A.toUserMessage("tell me a joke", "message-1234"); // messageId is message-1234
```



#### è·å–ä»»åŠ¡çš„å½“å‰çŠ¶æ€

```java
// Retrieve the task with id "task-1234"
GetTaskResponse response = client.getTask("task-1234");

// You can also specify the maximum number of items of history for the task
// to include in the response
GetTaskResponse response = client.getTask(new TaskQueryParams("task-1234", 10));
```



#### å–æ¶ˆæ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡

```java
// Cancel the task we previously submitted with id "task-1234"
CancelTaskResponse response = client.cancelTask("task-1234");

// You can also specify additional properties using a map
Map<String, Object> metadata = ...        
CancelTaskResponse response = client.cancelTask(new TaskIdParams("task-1234", metadata));
```



#### è·å–ä»»åŠ¡çš„æ¨é€é€šçŸ¥é…ç½®

```java
// Get task push notification configuration
GetTaskPushNotificationConfigResponse response = client.getTaskPushNotificationConfig("task-1234");

// The push notification configuration ID can also be optionally specified
GetTaskPushNotificationConfigResponse response = client.getTaskPushNotificationConfig("task-1234", "config-4567");

// Additional properties can be specified using a map
Map<String, Object> metadata = ...
GetTaskPushNotificationConfigResponse response = client.getTaskPushNotificationConfig(new GetTaskPushNotificationConfigParams("task-1234", "config-1234", metadata));
```



#### ä¸ºä»»åŠ¡è®¾ç½®æ¨é€é€šçŸ¥é…ç½®



```java
// Set task push notification configuration
PushNotificationConfig pushNotificationConfig = new PushNotificationConfig.Builder()
        .url("https://example.com/callback")
        .authenticationInfo(new AuthenticationInfo(Collections.singletonList("jwt"), null))
        .build();
SetTaskPushNotificationResponse response = client.setTaskPushNotificationConfig("task-1234", pushNotificationConfig);
```



#### åˆ—å‡ºä»»åŠ¡çš„æ¨é€é€šçŸ¥é…ç½®

```java
ListTaskPushNotificationConfigResponse response = client.listTaskPushNotificationConfig("task-1234");

// Additional properties can be specified using a map
Map<String, Object> metadata = ...
ListTaskPushNotificationConfigResponse response = client.listTaskPushNotificationConfig(new ListTaskPushNotificationConfigParams("task-123", metadata));
```



#### åˆ é™¤ä»»åŠ¡çš„æ¨é€é€šçŸ¥é…ç½®

```java
DeleteTaskPushNotificationConfigResponse response = client.deleteTaskPushNotificationConfig("task-1234", "config-4567");

// Additional properties can be specified using a map
Map<String, Object> metadata = ...
DeleteTaskPushNotificationConfigResponse response = client.deleteTaskPushNotificationConfig(new DeleteTaskPushNotificationConfigParams("task-1234", "config-4567", metadata));
```



#### å‘é€æµå¼æ¶ˆæ¯



```java
// Send a text message to the remote agent
Message message = A2A.toUserMessage("tell me some jokes"); // the message ID will be automatically generated for you
MessageSendParams params = new MessageSendParams.Builder()
        .message(message)
        .build();

// Create a handler that will be invoked for Task, Message, TaskStatusUpdateEvent, and TaskArtifactUpdateEvent
Consumer<StreamingEventKind> eventHandler = event -> {...};

// Create a handler that will be invoked if an error is received
Consumer<JSONRPCError> errorHandler = error -> {...};

// Create a handler that will be invoked in the event of a failure
Runnable failureHandler = () -> {...};

// Send the streaming message to the remote agent
client.sendStreamingMessage(params, eventHandler, errorHandler, failureHandler);
```



#### é‡æ–°è®¢é˜…ä»»åŠ¡

```java
// Create a handler that will be invoked for Task, Message, TaskStatusUpdateEvent, and TaskArtifactUpdateEvent
Consumer<StreamingEventKind> eventHandler = event -> {...};

// Create a handler that will be invoked if an error is received
Consumer<JSONRPCError> errorHandler = error -> {...};

// Create a handler that will be invoked in the event of a failure
Runnable failureHandler = () -> {...};

// Resubscribe to an ongoing task with id "task-1234"
TaskIdParams taskIdParams = new TaskIdParams("task-1234");
client.resubscribeToTask("request-1234", taskIdParams, eventHandler, errorHandler, failureHandler);
```



#### æ£€ç´¢æ­¤å®¢æˆ·ç«¯ä»£ç†æ­£åœ¨ä¸ä¹‹é€šä¿¡çš„æœåŠ¡å™¨ä»£ç†çš„è¯¦ç»†ä¿¡æ¯



```java
AgentCard serverAgentCard = client.getAgentCard();
```



è¿˜å¯ä»¥ä½¿ç”¨ä¸‹åˆ—`A2A#getAgentCard`æ–¹æ³•æ£€ç´¢ä»£ç†å¡ï¼š

```java
// http://localhost:1234 is the base URL for the agent whose card we want to retrieve
AgentCard agentCard = A2A.getAgentCard("http://localhost:1234");
```



## å…¶ä»–ç¤ºä¾‹



### Hello World å®¢æˆ·ç«¯ç¤ºä¾‹



[åœ¨examples/helloworld/client](https://github.com/a2aproject/a2a-java/blob/main/examples/helloworld/client/README.md)ç›®å½•ä¸­ï¼Œå¯ä»¥æ‰¾åˆ° Java A2A å®¢æˆ·ç«¯ä¸ Python A2A æœåŠ¡å™¨é€šä¿¡çš„å®Œæ•´ç¤ºä¾‹ã€‚æ­¤ç¤ºä¾‹æ¼”ç¤ºäº†ï¼š

- è®¾ç½®å’Œä½¿ç”¨ A2A Java å®¢æˆ·ç«¯
- å‘ Python A2A æœåŠ¡å™¨å‘é€å¸¸è§„æ¶ˆæ¯å’Œæµå¼æ¶ˆæ¯
- æ¥æ”¶å¹¶å¤„ç†æ¥è‡ª Python A2A æœåŠ¡å™¨çš„å“åº”

è¯¥ç¤ºä¾‹åŒ…æ‹¬æœ‰å…³å¦‚ä½•è¿è¡Œ Python A2A æœåŠ¡å™¨ä»¥åŠå¦‚ä½•ä½¿ç”¨ JBang è¿è¡Œ Java A2A å®¢æˆ·ç«¯çš„è¯¦ç»†è¯´æ˜ã€‚

æŸ¥çœ‹[ç¤ºä¾‹çš„ README](https://github.com/a2aproject/a2a-java/blob/main/examples/helloworld/client/README.md)ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚



## ğŸ“ ç¤ºä¾‹å·¥ç¨‹

### Hello World å®¢æˆ·ç«¯ç¤ºä¾‹

è·¯å¾„ï¼š`examples/helloworld/client`

- Java å®¢æˆ·ç«¯å¯¹æ¥ Python A2A æœåŠ¡å™¨
- æ”¯æŒå¸¸è§„å’Œæµå¼æ¶ˆæ¯
- ä½¿ç”¨ JBang å¯åŠ¨

### Hello World æœåŠ¡å™¨ç¤ºä¾‹

è·¯å¾„ï¼š`examples/helloworld/server`

- Java A2A æœåŠ¡å™¨æ¥æ”¶ Python å®¢æˆ·ç«¯æ¶ˆæ¯
- åŒ…å«ç¤ºä¾‹ `AgentCard` ä¸ `AgentExecutor` ç±»

------



## ğŸ§‘â€ğŸ¤â€ğŸ§‘ ç¤¾åŒºä¸è´¡çŒ®

- ç¤¾åŒºæ–‡ç« è¯·è§ï¼š`COMMUNITY_ARTICLES.md`
- è´¡çŒ®æŒ‡å—è¯·è§ï¼š`CONTRIBUTING.md`
- è¿è¡Œæ—¶é›†æˆè´¡çŒ®ï¼š`CONTRIBUTING_INTEGRATIONS.md`

------



## ğŸ”— æœåŠ¡ç«¯é›†æˆå‚è€ƒ

- [Quarkus å®ç°å‚è€ƒ](https://chatgpt.com/c/reference-impl/README.md)
- [Jakarta EE å®ç°ï¼ˆæ”¯æŒ Web Profileï¼‰](https://github.com/wildfly-extras/a2a-java-sdk-server-jakarta)

------



## âš–ï¸ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [Apache 2.0 License](https://www.apache.org/licenses/LICENSE-2.0)